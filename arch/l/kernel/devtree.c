/*
 * SPDX-License-Identifier: GPL-2.0
 * Copyright (c) 2023 MCST
 */

#include <linux/of.h>
#include <linux/pci.h>

#include <asm-l/devtree.h>


#ifdef CONFIG_PCI
int of_get_pci_domain_nr(struct device_node *node);

struct device_node *pcibios_get_phb_of_node(struct pci_bus *bus)
{
	struct device_node *np;
	for_each_node_by_name(np, "pci") {
		int domain = of_get_pci_domain_nr(np);
		if (domain == pci_domain_nr(bus))
			return np;
	}
	return NULL;
}
#endif /*CONFIG_PCI*/

#ifdef CONFIG_DTB_L_TEST
unsigned char test_blob[] = {
	0xd0, 0x0d, 0xfe, 0xed, 0x00, 0x00, 0x00, 0xbd, 0x00, 0x00, 0x00, 0x38,
	0x00, 0x00, 0x00, 0xa8, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x11,
	0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x15,
	0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x0b,
	0x00, 0x00, 0x00, 0x00, 0x73, 0x69, 0x6d, 0x70, 0x6c, 0x65, 0x2d, 0x62,
	0x75, 0x73, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x18,
	0x00, 0x00, 0x00, 0x0b, 0x54, 0x68, 0x69, 0x73, 0x20, 0x69, 0x73, 0x20,
	0x64, 0x74, 0x62, 0x20, 0x66, 0x6f, 0x72, 0x20, 0x74, 0x65, 0x73, 0x74,
	0x69, 0x6e, 0x67, 0x00, 0x00, 0x00, 0x00, 0x01, 0x64, 0x73, 0x70, 0x00,
	0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x00, 0x00, 0x00,
	0x6d, 0x63, 0x73, 0x74, 0x2c, 0x65, 0x6c, 0x64, 0x73, 0x70, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x09,
	0x63, 0x6f, 0x6d, 0x70, 0x61, 0x74, 0x69, 0x62, 0x6c, 0x65, 0x00, 0x73,
	0x6f, 0x6d, 0x65, 0x5f, 0x74, 0x65, 0x78, 0x74, 0x00
};
#endif /*CONFIG_DTB_L_TEST*/

