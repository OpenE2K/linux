#
# Self-checking options for debug
#
CONFIG_PREEMPT=y
CONFIG_DEBUG_RODATA_TEST=y
CONFIG_DEBUG_OBJECTS=y
CONFIG_DEBUG_OBJECTS_SELFTEST=y
CONFIG_DEBUG_OBJECTS_FREE=y
CONFIG_DEBUG_OBJECTS_TIMERS=y
CONFIG_DEBUG_OBJECTS_WORK=y
CONFIG_DEBUG_OBJECTS_RCU_HEAD=y
CONFIG_DEBUG_OBJECTS_PERCPU_COUNTER=y
CONFIG_DEBUG_OBJECTS_ENABLE_DEFAULT=1
CONFIG_DEBUG_TIMEKEEPING=y
CONFIG_DEBUG_LIST=y
CONFIG_DEBUG_PLIST=y
CONFIG_DEBUG_SG=y
CONFIG_DEBUG_NOTIFIERS=y
CONFIG_DEBUG_CREDENTIALS=y
CONFIG_DEBUG_WQ_FORCE_RR_CPU=y
CONFIG_DEBUG_VIRTUAL=y
CONFIG_REFCOUNT_FULL=y
CONFIG_KPROBES_SANITY_TEST=y
CONFIG_DEBUG_LOCKING_API_SELFTESTS=y
CONFIG_DEBUG_SHIRQ=y
CONFIG_DEBUG_VM=y
CONFIG_DEBUG_VM_PGFLAGS=y
CONFIG_DEBUG_VM_RB=y
CONFIG_DEBUG_VM_VMACACHE=y
CONFIG_SLUB_DEBUG_ON=y
# CONFIG_MCST_MEMORY_SANITIZE is not set
CONFIG_DEBUG_RWSEMS=y
CONFIG_DEBUG_SPINLOCK=y
CONFIG_DEBUG_MUTEXES=y
CONFIG_DEBUG_WW_MUTEX_SLOWPATH=y
CONFIG_DEBUG_PAGEALLOC=y
CONFIG_DEBUG_ATOMIC_SLEEP=y
CONFIG_DEBUG_PAGEALLOC_ENABLE_DEFAULT=y
CONFIG_DEBUG_LOCK_ALLOC=y
CONFIG_PROVE_LOCKING=y
CONFIG_LOCKDEP=y

#
# Torture tests as modules for debug kernel
#
CONFIG_RCU_TORTURE_TEST=m
CONFIG_LOCK_TORTURE_TEST=m
CONFIG_TEST_VMALLOC=m

#
# Short testing at module load
#

# Check return value
CONFIG_TEST_LIST_SORT=m
CONFIG_TEST_SORT=m
CONFIG_TEST_HEXDUMP=m
CONFIG_TEST_BITFIELD=m
CONFIG_TEST_UUID=m
CONFIG_TEST_XARRAY=m
CONFIG_TEST_OVERFLOW=m
CONFIG_TEST_RHASHTABLE=m
CONFIG_TEST_HASH=m
CONFIG_TEST_USER_COPY=m
CONFIG_TEST_BPF=m
CONFIG_TEST_FIRMWARE=m
CONFIG_TEST_SYSCTL=m
CONFIG_TEST_STATIC_KEYS=m
CONFIG_TEST_MEMCAT_P=m

# Option CONFIG_DEBUG_WW_MUTEX_SLOWPATH makes ww_mutex_lock()
# occasionally return EDEADLK; therefore test-ww_mutex (enabled
# via this option) reports on a cyclic deadlock error.
# Although DEBUG_WW_MUTEX_SLOWPATH is a much better candidate
# to be removed from debug config, it will cause the removal of
# PROVE_LOCKING that is one of the best options for debug.
# CONFIG_WW_MUTEX_SELFTEST is not set

# Check dmesg
CONFIG_PERCPU_TEST=m
CONFIG_MD_RAID456=m
CONFIG_ASYNC_RAID6_TEST=m
CONFIG_REED_SOLOMON_TEST=m
CONFIG_RBTREE_TEST=m
CONFIG_TEST_STRING_HELPERS=m
CONFIG_TEST_KSTRTOX=m
CONFIG_TEST_BLACKHOLE_DEV=m
CONFIG_ATOMIC64_SELFTEST=m
CONFIG_STRING_SELFTEST=m
