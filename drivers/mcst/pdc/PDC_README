
typedef struct pdc_ioc_parm {
	u64		data;		
	size_t		size;		
	int		err_no;		 
	unsigned int	rwmode;	
} pdc_ioc_parm_t;

ПАРАМЕТРЫ IOCTL:

PDC_IOC_ALLOCB - Выделение DMA буфера для данного устройства (инстанса)
	Устройству передается:
		size - размер (bytes) выделяемого буфера
	Пользователю возращается:
		data > 0 - размер (bytes) выделенного буфера (size будет выровнен до следующего 
						  порядка двойки в терминах 1- размер страницы.
						  Т.е может быть выделено 1,2,4,8 и т.д страниц.
						  Например,если пользователь запрашивает 7345 байт,
						  будет выделено 8192 байта или 2 страницы).
		data = 0 - буфер уже был выделен в предыдущих операциях.

		data = -1 - ошибка.
		err_no - код ошибки.
			PDC_E_NOBUF - не удачное выделение DMA буфера

PDC_IOC_FREEB - Освобождает DMA буфер для данного устройства (инстанса)
		дополнительных параметров не требуется.
		В случае если устройство в данный момент работает с буфером
		оно будет остановлено. 

PDC_WRR - Запись в регистр данного устройства (инстанса)
	  Устойству передается:
		size - номер реристра
			0 - CONTROL_REGISTER 		- PLVC Control Register
			1 - STATUS_REGISTER 		- PLVC Status Register
			2 - MASTER_CONTROL_REGISTER	- Master Control Register	
			3 - MASTER_ADDRESS_REGISTER     - Master Address Register
			4 - SLAVE_CONTROL_REGISTER	- Slave Control Register
			5 - SLAVE_DATA_REGISTER	        - Slave Data Register
			6 - SRBC_REGISTER		- Slave Recieve Buffer Count Register
			7 - STBC_REGISTER		- Slave Transmit Buffer Count Register
			8 - MRBC_REGISTER		- Master Recieve Buffer Count Register
			9 - MTBC_REGISTER	        - Master Transmit Buffer Count Register
		data - значение (32 бита)
			Для упаковки значения см. "АДРЕССАЦИЯ БИТОВ РЕГИСТРОВ"
	Пользователю возращается:
		err_no < 0 в случае ошибки
			EINVAL - не правильный номер регистра

PDC_RDR - Чтение регистра данного устройства (инстанса)
	  Устойству передается:
		size - номер реристра (см. выше)
			
			Для упаковки значения см. "АДРЕССАЦИЯ БИТОВ РЕГИСТРОВ"
	Пользователю возращается:
		data - значение (32 бита)
			Для распаковки значения см. "АДРЕССАЦИЯ БИТОВ РЕГИСТРОВ"
		data < 0 в случае ошибки
			EINVAL - не правильный номер регистра
			

PDC_MB_TRANSMIT - передача DMA буфера данного устройства
	Устройству передается:
		  size - размер передаваемых данных (bytes) (Размер будет выровнен до 4-х байт, до типа int
							     если выровненный size окажется больше размера
							     выделенного DMA буфера, то будет обрезан до него)
		  rwmode - проверка текущего статуса устройства для режима MASTER.
			PDC_CHECK - проверить свободно ли устройство для режима MASTER.

	Пользователю возращается:
		  если rwmode = PDC_CHECK;
		        err_no:
				PDC_BUSY - Устройство занято для режима MASTER (выполянет обмен)
				rwmode  - Состояние (&PDC_MB_TRANSMIT или &PDC_MB_RECIEVE)

				PDC_NOTRUN - Устройство свободно для режима MASTER
				rwmode  - Состояние (0)

		  если rwmode != PDC_CHECK;
			err_no: 
				PDC_E_PENDING - Устройство занято (выполянет обмен) и работа не 
						может быть продолжена до освобождения MASTER
				rwmode  - Состояние (&PDC_MB_TRANSMIT или &PDC_MB_RECIEVE)

				PDC_E_SIZE - в случае size < 0;
				PDC_E_INIT_MEM - DMA буфер не выделен
				rwmode - данное состояние (PDC_MB_TRANSMIT) 

				PDC_E_ERTRANS - В системе зарегистрировано прерывание Err.
				rwmode - Состояние статусного регистра
				size - размер переданных данных(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному). 
			        В случае получения прерывания Err устройство останавливается.
				(Останов всех запущеных режимов).Рекомендуется проверить работоспособность
				ячеек и кабеля затем произвести PDC_RESET и затем PDC_INIT. 

				PDC_RMI - В системе зарегистрировано удаленное прерывание
				rwmode - Состояние статусного регистра
				size - размер переданных данных(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
				В случае получения удаленного прерывания устройство останавливается.
				(Останов всех запущеных режимов). Пользователю предлагается самому решать 
				что делать с этим событием. В случае если требуется выполнить обмен - 
				необходимо сбросить Информацию о полученном У/П (удаленном прерывании)
				при помощи  PDC_CLEAR_LAST_INT.

				PDC_E_TIMER - Выход по таймеру.
				rwmode - PDC_MB_TRANSMIT
				size - размер переданных данных (Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
	
				PDC_SIGNAL - Выход по сигналу.
				rwmode - PDC_MB_TRANSMIT
				size - размер переданных данных (Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).

			В случае успеха:
				err_no = 0;
				rwmode - Состояние статусного регистра
				size - размер переданных данных. Должен быть равен запрошенному размеру
				       выровненному до 4 байт.В случае произведенного PDC_RESET или 
				       clear_master_task_mu() может быть меньше.
				
				
PDC_MB_RECIEVE - прием в DMA буфер данного устройства
	Устройству передается:
		  size - размер принимаемых данных (bytes) (Размер будет выровнен до 4-х байт, до типа int
							     если выровненный size окажется больше размера
							     выделенного DMA буфера, то будет обрезан до него)
		  rwmode - проверка текущего статуса устройства для режима MASTER.
			PDC_CHECK - проверить свободно ли устройство для режима MASTER.

	Пользователю возращается:
		  если rwmode = PDC_CHECK;
		        err_no:
				PDC_BUSY - Устройство занято для режима MASTER (выполянет обмен)
				rwmode  - Состояние (&PDC_MB_TRANSMIT или &PDC_MB_RECIEVE)

				PDC_NOTRUN - Устройство свободно для режима MASTER
				rwmode  - Состояние (0)

		  если rwmode != PDC_CHECK;
			err_no: 
				PDC_E_PENDING - Устройство занято (выполянет обмен) и работа не 
						может быть продолжена до освобождения MASTER
				rwmode  - Состояние (&PDC_MB_TRANSMIT или &PDC_MB_RECIEVE)

				PDC_E_SIZE - в случае size < 0;
				PDC_E_INIT_MEM - DMA буфер не выделен
				rwmode - данное состояние (PDC_MB_RECIEVE) 

				PDC_E_ERTRANS - В системе зарегистрировано прерывание Err.
				rwmode - Состояние статусного регистра
				size - размер принятых данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному). 
			        В случае получения прерывания Err пользователю устройство останавливается.
				(Останов всех запущеных режимов). Рекомендуется проверить работоспособность
				ячеек и кабеля затем произвести PDC_RESET и затем PDC_INIT. 

				PDC_RMI - В системе зарегистрировано удаленное прерывание
				rwmode - Состояние статусного регистра
				size - размер принятых данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
				В случае получения удаленного прерывания устройство останавливается.
				(Останов всех запущеных режимов). Пользователю предлагается самому решать 
				что делать с этим событием. В случае если требуется выполнить обмен - 
				необходимо сбросить Информацию о полученном У/П (удаленном прерывании)
				при помощи  PDC_CLEAR_LAST_INT.

				PDC_E_TIMER - Выход по таймеру.
				rwmode - PDC_MB_RECIEVE
				size - размер принятых данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
	
				PDC_SIGNAL - Выход по сигналу.
				rwmode - PDC_MB_RECIEVE
				size - размер принятых данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).

			В случае успеха:
				err_no = 0;
				rwmode - Состояние статусного регистра
				size - размер принятых данных. Должен быть равен запрошенному размеру
				       выровненному до 4 байт. В случае произведенного PDC_RESET или
				       clear_master_task_mu() может быть меньше.

PDC_RESET -     Производит общий сброс устройства. Если устройство выполняет какие либо обмены - оно
		будет вначале остановлено. Пользовательским процессам инициировавшим обмены будет
		выдано запрошенное состояние на момент останова. 
 
PDC_CLEAR_LAST_INT - Сбрасывает информацию о последнем полученном прерывании.
		     Например если в системе последний раз было зарегистрировано Err или 
		     Удаленное (Rm) прерывание то последующие попытки выполнить запрос будут 
		     отвергнуты с сообщением о полученном Err или Rm.

		     PDC_CLEAR_LAST_INT - должно выполнятся когда устройство остановлено 
					  (задачи Master и Slave сброшены)
		     Одна из задачи не сброшена:
			   err_no - PDC_E_PENDING - Устройство занято (выполянет обмен) и работа не 
						    может быть продолжена до его полного останова	
					     

PDC_SHOW_LAST_INT - Выдает информацию о последнем полученном прерывании.

		     PDC_SHOW_LAST_INT - должно выполнятся когда устройство остановлено 
					  (задачи Master и Slave сброшены)
		     Одна из задачи не сброшена:
			   err_no - PDC_E_PENDING - Устройство занято (выполянет обмен) и работа не 
						    может быть продолжена до его полного останова
		     Задачи сброшены: 
			   rwmode - Состояние статусного регистра

PDC_CLEAR_MASTER_TASK - Сбрасывает задачу MASTER
		     В случае выполнением устройсвом задачи MASTER сбросит задачу
		     Пользовательскому процессу инициировавшему обмен будет
		     выдано запрошенное состояние на момент останова.	

PDC_CLEAR_SLAVE_TASK - Сбрасывает задачу SLAVE
		     В случае выполнением устройсвом задачи SLAVE сбросит задачу
		     Пользовательскому процессу инициировавшему обмен будет
		     выдано запрошенное состояние на момент останова.

PDC_CLEAR_MRB - Очищает набортный Master Recieve Buffer
		Команда выполняется в случае если Master Recieve Buffer не задействован
		в работе. А именно PDC_MB_RECIEVE - команда в данный момент не выполняется
		В случае если PDC_MB_RECIEVE выполняется:
			err_no - PDC_E_PENDING - Устройство занято (задействован Master Recieve Buffer)
						 и работа не может быть продолжена до окончания выполнения
						 PDC_MB_RECIEVE

PDC_CLEAR_MTB - Очищает набортный Master Transmit Buffer
		Команда выполняется в случае если Master Transmit Buffer не задействован
		в работе. А именно PDC_MB_TRANSMIT - команда в данный момент не выполняется
		В случае если PDC_MB_TRANSMIT выполняется:
			err_no - PDC_E_PENDING - Устройство занято (задействован Master Transmit Buffer)
						 и работа не может быть продолжена до окончания выполнения
						 PDC_MB_TRANSMIT


PDC_CLEAR_SRB - Очищает набортный Slave Recieve Buffer
		Команда выполняется в случае если Slave Recieve Buffer не задействован
		в работе. А именно PDC_SB_RECIEVE - команда в данный момент не выполняется
		В случае если PDC_SB_RECIEVE выполняется:
			err_no - PDC_E_PENDING - Устройство занято (задействован Slave Recieve Buffer)
						 и работа не может быть продолжена до окончания выполнения
						 PDC_SB_RECIEVE

PDC_CLEAR_STB - Очищает набортный Slave Transmit Buffer
		Команда выполняется в случае если Slave Transmit Buffer не задействован
		в работе. А именно PDC_SB_TRANSMIT - команда в данный момент не выполняется
		В случае если PDC_SB_TRANSMIT выполняется:
			err_no - PDC_E_PENDING - Устройство занято (задействован Slave Transmit Buffer)
						 и работа не может быть продолжена до окончания выполнения
						 PDC_SB_TRANSMIT

PDC_WAITING_RMI_MASTER - Ожидание удаленного прерывания для MASTER
    Пользователю возращается:
	
	err_no:
		PDC_E_ALREADY_WAIT - ожидание уже выполняется для мастер
		rwmode = PDC_WAITING_RMI_MASTER
	
		PDC_E_ERWAIT - В системе зарегистрировано прерывание Err.
		rwmode - Состояние статусного регистра

		PDC_E_TIMER - Выход по таймеру.
		rwmode - PDC_WAITING_RMI_MASTER
	
		PDC_SIGNAL - Выход по сигналу.
		rwmode - PDC_WAITING_RMI_MASTER

	В случае успеха:
		err_no = 0;
		rwmode - Состояние статусного регистра

PDC_WAITING_RMI_SLAVE - Ожидание удаленного прерывания для SLAVE
    Пользователю возращается:
	
	err_no:
		PDC_E_ALREADY_WAIT - ожидание уже выполняется для мастер
		rwmode = PDC_WAITING_RMI_SLAVE
	
		PDC_E_ERWAIT - В системе зарегистрировано прерывание Err.
		rwmode - Состояние статусного регистра

		PDC_E_TIMER - Выход по таймеру.
		rwmode - PDC_WAITING_RMI_SLAVE
	
		PDC_SIGNAL - Выход по сигналу.
		rwmode - PDC_WAITING_RMI_SLAVE

	В случае успеха:
		err_no = 0;
		rwmode - Состояние статусного регистра

PDC_SB_TRANSMIT - Передача SLAVE буфера
	Устройству передается:
		rwmode - опции для режима SLAVE.
			PDC_CHECK - проверить свободно ли устройство для режима SLAVE.
			PDC_USER_BUFFER - Передать буфер пользователя
				          В этом режиме в ядре выделяется буфер размера size, выровненного
					  до 4-х байт. Буфер заполняется данными из адрессного пространства
					  пользователя. Системный буфер порциями по 4 байта передается по LVDS
					  каналу до получения прерывания или до тех пор пока не будет передано size 
					  данных если прерывание замаскировано.  
					  
				size - размер передаваемых данных (bytes) (Размер будет выровнен до 4-х байт, 
					до типа int)
				data - адресс буфера в адрессном пространстве пользователя
			PDC_USER_DATA - Передать 4 байта информации
					В этом режиме передается 4 байта информации до получения прерывания 
					или до тех пор пока не будет передано 4 байта данных если прерывание 
					замаскировано.
				data - передаваемая информация
	Пользователю возращается:
		если rwmode = PDC_CHECK;
		        err_no:
				PDC_BUSY - Устройство занято для режима SLAVE (выполянет обмен)
				rwmode  - Состояние (&PDC_SB_TRANSMIT или &PDC_SB_RECIEVE)

				PDC_NOTRUN - Устройство свободно для режима SLAVE
				rwmode  - Состояние (0)

		если rwmode = PDC_USER_BUFFER или PDC_USER_DATA;
			err_no: 
				PDC_E_PENDING - Устройство занято (выполянет обмен) и работа не 
						может быть продолжена до освобождения SLAVE
				rwmode  - Состояние (&PDC_SB_TRANSMIT или &PDC_SB_RECIEVE)
			
				Только для случая PDC_USER_BUFFER:
					PDC_E_SIZE - в случае size < 0;
					PDC_E_MEMORY_ALLOC - В случае если запрашиваемый в ядре не выделен
					PDC_E_DDI_COPYIN - ошибка при копировании из адрессного пространства
							   пользователя в адрессное пространство ядра
					rwmode - PDC_SB_TRANSMIT
	

				PDC_E_ERTRANS - В системе зарегистрировано прерывание Err.
				rwmode - Состояние статусного регистра
				size - размер переданных данных. (Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
			        В случае получения прерывания Err пользователю устройство останавливается.
				(Останов всех запущеных режимов). Рекомендуется проверить работоспособность
				ячеек и кабеля затем произвести PDC_RESET и затем PDC_INIT. 

				PDC_RMI - В системе зарегистрировано удаленное прерывание
				rwmode - Состояние статусного регистра
				size - размер переданных данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
				В случае получения удаленного прерывания устройство останавливается.
				(Останов всех запущеных режимов). Пользователю предлагается самому решать 
				что делать с этим событием. В случае если требуется выполнить обмен - 
				необходимо сбросить Информацию о полученном У/П (удаленном прерывании)
				при помощи  PDC_CLEAR_LAST_INT.

				PDC_SIGNAL - Выход по сигналу.
				rwmode - PDC_SB_TRANSMIT
				size - размер переданных данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
		В случае успеха:
				err_no = 0;
				data - В случае PDC_USER_DATA передаваемое данное 
				       В случае PDC_USER_BUFFER адрес пользователя
				rwmode - Состояние статусного регистра
				size - размер переданных данных. Должен быть равен запрошенному размеру
				       выровненному до 4 байт. В случае произведенного PDC_RESET или
				       clear_slave_task_mu() может быть меньше.
				       в случае режима PDC_USER_DATA может быть 0 или 4 байта
				
PDC_SB_RECIEVE - Прием SLAVE буфера
	Устройству передается:
		rwmode - опции для режима SLAVE.
			PDC_CHECK - проверить свободно ли устройство для режима SLAVE.
			PDC_USER_BUFFER - Принять данные в буфер пользователя
				          В этом режиме в ядре выделяется буфер размера size, выровненного
					  до 4-х байт. Данные считываются в этот буфер с набортного порциями
					  по 4 байта до получения прерывания или до тех пор пока не будет
					  прочитано size байт данных если прерывание замаскировано. 
					  После окончания считывания size данных передается в адрессное 
					  пространство пользователя указанное в data. Если набортный буфер пуст
					  а размер принятых данных меньше запрошенного size драйвер ожидает 
					  появления данных в набортном буфере. Считывание возобновляется после
					  появления там хотя бы одной порции информации 
					  
				size - размер принимаемых данных (bytes) (Размер будет выровнен до 4-х байт, 
					до типа int)
				data - адресс буфера в адрессном пространстве пользователя
			PDC_USER_DATA - Принять 4 байта информации
					В этом режиме принимается 4 байта информации до получения прерывания 
					или до тех пор пока не будет принято 4 байта данных если прерывание 
					замаскировано. Если набортный буфер пуст а размер принятых данных 
					меньше запрошенного size драйвер ожидает появления данных в набортном буфере.
	Пользователю возращается:
		если rwmode = PDC_CHECK;
		        err_no:
				PDC_BUSY - Устройство занято для режима SLAVE (выполянет обмен)
				rwmode  - Состояние (&PDC_SB_TRANSMIT или &PDC_SB_RECIEVE)

				PDC_NOTRUN - Устройство свободно для режима SLAVE
				rwmode  - Состояние (0)
		если rwmode = PDC_USER_BUFFER или PDC_USER_DATA;
			err_no: 
				PDC_E_PENDING - Устройство занято (выполянет обмен) и работа не 
						может быть продолжена до освобождения SLAVE
				rwmode  - Состояние (&PDC_SB_TRANSMIT или &PDC_SB_RECIEVE)
			
				Только для случая PDC_USER_BUFFER:
					PDC_E_SIZE - в случае size < 0;
					PDC_E_MEMORY_ALLOC - В случае если запрашиваемый в ядре буфер не выделен
					PDC_E_DDI_COPYIN - ошибка при копировании из адрессного пространства
							   пользователя в адрессное пространство ядра
					rwmode - PDC_SB_RECIEVE
	

				PDC_E_ERTRANS - В системе зарегистрировано прерывание Err.
				rwmode - Состояние статусного регистра
				size - размер принятых данных. (Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
			        В случае получения прерывания Err устройство останавливается.
				(Останов всех запущеных режимов). Рекомендуется проверить работоспособность
				ячеек и кабеля затем произвести PDC_RESET и затем PDC_INIT. 

				PDC_RMI - В системе зарегистрировано удаленное прерывание
				rwmode - Состояние статусного регистра
				size - размер принятых данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
				В случае получения удаленного прерывания устройство останавливается.
				(Останов всех запущеных режимов). Пользователю предлагается самому решать 
				что делать с этим событием. В случае если требуется выполнить обмен - 
				необходимо сбросить Информацию о полученном У/П (удаленном прерывании)
				при помощи  PDC_CLEAR_LAST_INT.

				PDC_SIGNAL - Выход по сигналу.
				rwmode - PDC_SB_TRANSMIT
				size - размер принятых данных.(Если size не равен запрошенному то передачу 
				следует повторить поскольку в данном устройстве нельзя дать точную оценку.
				Т.о. нас интересует только одно значение, size = запрошенному).
		В случае успеха:
				err_no = 0;
				data - В случае PDC_USER_DATA считанное данное 
				       В случае PDC_USER_BUFFER адрес пользователя
				rwmode - Состояние статусного регистра
				size - размер принятых данных. Должен быть равен запрошенному размеру
				       выровненному до 4 байт. В случае произведенного PDC_RESET или
				       clear_slave_task_mu() может быть меньше.
				       в случае режима PDC_USER_DATA может быть 0 или 4 байта

PDC_INIT - Дефолтная инициализация устройства.
	    Устанавливает регистр управления в начальное положение, при этом:
		Режим работы устройсва устанавливается прямой - PCI Master <- PCI Master, PCI Slave <- PCI Slave
		Hide режим сброшен.
		NMI прерывания замаскированы.
		
		Таким образом разрешено получать прерывания в режимах MASTER и SLAVE а также 
		прерывание при не устранимой ошибке PI_Src_Err и Удаленные прерывание PI_Src_Rm и
                NMI_Src_Rm. Удаленное прерывание NMI_Src_Rm обрабатывается ОС как стандартное  NMI_Src_Rm
		от устройства. 
	
		Прерывание MV возникает при окончании Приема/Передачи Запрошенных данных в режиме
		MASTER. А также при ручном сбросе режима MASTER (см CLEAR_MASTER_TASK) если режим 
		до этого момента не сброшен другими событиями, такими как Err, Rm.
		Также прерывание возникает по сигналу, однако в этом случае информация о нем доступна
		через PDC_SHOW_LAST_INT.
		
		Прерывание SV возникает при окончании Приема/Передачи Запрошенных данных в режиме
		SLAVE. А также при ручном сбросе режима SLAVE (см CLEAR_SLAVE_TASK) если режим 
		до этого момента не сброшен другими событиями, такими как Err, Rm.
		Также прерывание возникает по сигналу, однако в этом случае информация о нем доступна
		через PDC_SHOW_LAST_INT.
	
		Если необходимо изменить конфигурацию следует обращаться к функции PDC_WRR
		
PDC_SET_TIMER - Установка таймера (mksec)
		таймер ожидания используется в режиме MASTER при разрешенном прерывании MV 
		а также для PDC_WAITING_RMI_SLAVE и PDC_WAITING_RMI_MASTER
	Драйверу передается:
		data - значение таймера (mksec) 
	Пользователю возращается:
		size - Предыдущее значение таймера				
